/*! widget-b1138ef71629e8158493 */!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s="tjUo")}({"/u0l":function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,o=Math.max(r>=0?r:i-Math.abs(r),0);o<i;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[o],e))return!0;o++}return!1}})},"4fRq":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},EbDI:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},I2ZF:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},Ijbi:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},MVZn:function(e,t,n){var i=n("lSNA");e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}},RIqP:function(e,t,n){var i=n("Ijbi"),r=n("EbDI"),o=n("Bnag");e.exports=function(e){return i(e)||r(e)||o()}},W8MJ:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},lwsE:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},p46w:function(e,t,n){var i,r;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(r="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=r),!0,e.exports=o(),!!0){var s=window.Cookies,a=window.Cookies=o();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function t(n){function i(t,r,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},i.defaults,o)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}o.expires=o.expires?o.expires.toUTCString():"";try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var l in o)o[l]&&(c+="; "+l,!0!==o[l]&&(c+="="+o[l]));return document.cookie=t+"="+r+c}t||(s={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<u.length;h++){var m=u[h].split("="),p=m.slice(1).join("=");this.json||'"'!==p.charAt(0)||(p=p.slice(1,-1));try{var f=m[0].replace(d,decodeURIComponent);if(p=n.read?n.read(p,f):n(p,f)||p.replace(d,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===f){s=p;break}t||(s[f]=p)}catch(e){}}return s}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},tjUo:function(e,t,n){"use strict";n.r(t);n("/u0l");var i=n("MVZn"),r=n.n(i),o=n("lwsE"),s=n.n(o),a=n("W8MJ"),c=n.n(a),l=n("p46w"),u=n.n(l),d=n("xDdU"),h=n.n(d);var m=function(){};function p(e,t){var n=null;return function(){for(var i=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];clearTimeout(n),n=setTimeout((function(){e.apply(i,o)}),t)}}var f=function(){function e(){s()(this,e)}return c()(e,[{key:"addCommon",value:function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("style");t.id="uxs-styles",t.appendChild(document.createTextNode("\n.uxs-loader {\n  width: 40px;\n  height: 40px;\n  position: absolute;\n  top: 45%;\n  left: 50%;\n  background-color: #333;\n  border-radius: 100%;\n  -webkit-animation: uxs-load 1.0s infinite ease-in-out;\n  animation: uxs-load 1.0s infinite ease-in-out;\n}\n\n.uxs-overlay {\n  position: fixed;\n  z-index: 1000000;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n\n@-webkit-keyframes uxs-load {\n  0% { -webkit-transform: scale(0) }\n  100% {\n    -webkit-transform: scale(1.0);\n    opacity: 0;\n  }\n}\n\n@keyframes uxs-load {\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  } 100% {\n    -webkit-transform: scale(1.0);\n    transform: scale(1.0);\n    opacity: 0;\n  }\n}\n.uxs-back {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 999999;\n  overflow: auto;\n  background: rgba(0, 0, 0, 0.26);\n  -webkit-overflow-scrolling: touch;\n}\n.uxs-back iframe {\n  width: 100%;\n  height: 99%;\n  display: block;\n}\n\n.uxs-slide-back {\n  z-index: 999998;\n  overflow: auto;\n  height: 100%;\n  position: fixed;\n  opacity: 0;\n  -webkit-overflow-scrolling: touch;\n  overflow: visible;\n}\n\n.uxs-slide-back {\n  max-height: 100%;\n}\n\n.uxs-mobile-slide-back {\n  width: 100%;\n  overflow: auto;\n  overflow-x: hidden;\n}\n\n.uxs-slide-back.uxs-mobile-slide-back iframe {\n  display: block;\n  width: 80%;\n  margin-left: auto;\n}\n\n.uxs-slide-back.lowerLeft,\n.uxs-slide-back.upperRight,\n.uxs-slide-back.upperLeft,\n.uxs-slide-back.lowerRight {\n  opacity: 1;\n}\n\n.uxs-slide-back.lowerLeft {\n  left: 0;\n  bottom: 0;\n}\n.uxs-slide-back.upperRight {\n  right: 0;\n}\n.uxs-slide-back.upperLeft {\n  left: 0;\n}\n.uxs-slide-back.lowerRight {\n  right: 0;\n  bottom: 0;\n}\n\n.uxs-widget {\n  padding: 5px;\n  border: 2px solid red;\n  background-image : attr(data-src url);\n  background-size: cover;\n}\n\n.uxs-mobile-wrapper {\n  font-size: 0;\n  line-height: 0;\n}\n\n.uxs-wrapper img {\n  display: none;\n}\n\n@media screen and (min-width: 769px) {\n  .uxs-mobile-wrapper img {\n    display: none;\n  }\n  .uxs-wrapper img {\n    display: block;\n  }\n}\n")),e.appendChild(t)}},{key:"clear",value:function(){var e=document.getElementsByTagName("head")[0],t=document.querySelector("#uxs-styles");e.removeChild(t)}}]),e}(),g={},v=window.navigator.userAgent.toLowerCase(),y=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];function w(e){return-1!==v.indexOf(e)}g.macos=function(){return w("mac")},g.ios=function(){return g.iphone()||g.ipod()||g.ipad()},g.iphone=function(){return!g.windows()&&w("iphone")},g.ipod=function(){return w("ipod")},g.ipad=function(){return w("ipad")},g.android=function(){return!g.windows()&&w("android")},g.androidPhone=function(){return g.android()&&w("mobile")},g.androidTablet=function(){return g.android()&&!w("mobile")},g.blackberry=function(){return w("blackberry")||w("bb10")||w("rim")},g.blackberryPhone=function(){return g.blackberry()&&!w("tablet")},g.blackberryTablet=function(){return g.blackberry()&&w("tablet")},g.windows=function(){return w("windows")},g.windowsPhone=function(){return g.windows()&&w("phone")},g.windowsTablet=function(){return g.windows()&&w("touch")&&!g.windowsPhone()},g.fxos=function(){return(w("(mobile")||w("(tablet"))&&w(" rv:")},g.fxosPhone=function(){return g.fxos()&&w("mobile")},g.fxosTablet=function(){return g.fxos()&&w("tablet")},g.meego=function(){return w("meego")},g.mobile=function(){return g.androidPhone()||g.iphone()||g.ipod()||g.windowsPhone()||g.blackberryPhone()||g.fxosPhone()||g.meego()},g.tablet=function(){return g.ipad()||g.androidTablet()||g.blackberryTablet()||g.windowsTablet()||g.fxosTablet()},g.desktop=function(){return!g.tablet()&&!g.mobile()},g.tv=function(){for(var e=0;e<y.length;){if(w(y[e]))return!0;e++}return!1};var b=function(){return{desktop:g.desktop(),tablet:g.tablet(),mobile:g.mobile(),tv:g.tv(),iphone:g.iphone()}},k={API_URL:"https://public-api.uxfeedback.ru/v1",FORM_URL:"https://cdn3.uxfeedback.ru/1.1.19/form/index.html"};var x={id:null,type:null,matchedSeconds:null},S=function(){function e(){s()(this,e),this.uid=null,this.uidType=null,this.outer=null,this.wrapper=null,this.mobileWrapper=null,this.state=null,this.iframe=null,this.spinner=null,this.initedListener=!1,this.campaign=null,this.usedCampaign=null,this.styles=null,this.device=null,this.widgetForm=null,this.campaignForm=null,this.overlay=null,this.formFocused=!1,this.formHeight=null,this.closeWidgetForm=this.closeWidgetForm.bind(this),this.closeCampaignForm=this.closeCampaignForm.bind(this),this.hideWidgetForm=this.hideWidgetForm.bind(this),this.hideCampaignForm=this.hideCampaignForm.bind(this),this.messageListenerFn=this.messageListenerFn.bind(this),this.onUnloadListener=this.onUnloadListener.bind(this),this.scrollPageListener=this.scrollPageListener.bind(this),this.onResize=this.onResize.bind(this),this.subscriber=this.subscriber.bind(this),this.dateTime=(new Date/1e3).toFixed()}return c()(e,[{key:"getSiteId",value:function(){return window._uxsSettings&&window._uxsSettings.id}},{key:"createOuter",value:function(){var e=document.body,t=document.createElement("div"),n=e.childNodes[0];return n?e.insertBefore(t,n):e.appendChild(t),t}},{key:"createWrapper",value:function(){var e=document.createElement("div");return e.id="uxs_".concat(this.getSiteId()),e.classList.add("uxs-wrapper"),this.outer.appendChild(e),this.addWrapperStyles(e),e}},{key:"addWrapperStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state,i=n.position,r=n.mobile,o=e.style;if(o.zIndex=999,o.position="fixed",o.cursor="pointer",o.textAlign="right",t){var s="7px";o.bottom=0,1===r.position?o.left=s:2===r.position&&(o.right=s)}else{var a="23px";1===i&&(o.left=0),3===i&&(o.left=a),2===i&&(o.right=0),4===i&&(o.right=a),3!==i&&4!==i&&5!==i||(o.bottom=0),1!==i&&2!==i||(o.top="50%",o.MsTransform="translateY(-50%)",o.WebkitTransform="translateY(-50%)",o.transform="translateY(-50%)"),5===i&&(o.left="50%",o.MsTransform="translateX(-50%)",o.WebkitTransform="translateX(-50%)",o.transform="translateX(-50%)")}}},{key:"createMobileWrapper",value:function(){var e=document.createElement("div");return e.id="uxs_".concat(this.getSiteId(),"_m"),e.classList.add("uxs-mobile-wrapper"),this.outer.appendChild(e),this.addWrapperStyles(e,!0),e}},{key:"doesCampaignMatch",value:function(){if(null===this.campaign)return!1;var e=this.campaign.id;return m("doesCampaignMatch",this.campaign),!!e}},{key:"createIframe",value:function(e){var t,n,i,r,o,s,a,c={userId:this.getSiteId(),ymId:(i=document.cookie,r=i.indexOf("_ym_uid"),o=i.indexOf(";",r),s=i.length,a=-1===o?s:o,i.substring(r,a).replace("_ym_uid=","")),gaId:(t=document.cookie.match("(?:^|;)\\s*_ga=([^;]*)"),n=t?decodeURIComponent(t[1]).match(/(\d+\.\d+)$/):null,n?n[1]:null),object:e},l=document.createElement("iframe");this.doesCampaignMatch()&&(c.campaignId=this.campaign.id,this.saveVisit(this.campaign.id)),this.checkPreviewMode()?c.isPreview=!0:"widget"===e&&this.saveVisit(this.state.widgetCampaignId);var u=encodeURIComponent(JSON.stringify(c));return l.frameBorder="0",l.marginWidth="0",l.marginHeight="0",l.scrolling="no",l.style.position="relative",l.style.backgroundColor="transparent",l.src="".concat(k.FORM_URL,"?config=").concat(u),l}},{key:"getFormType",value:function(){return this.campaign&&this.campaign.type||1}},{key:"createOverlay",value:function(){var e=document.createElement("div");return e.className="uxs-overlay",e}},{key:"createForm",value:function(e){var t=this,n=this.device.mobile,i=this.getFormType(),r=document.createElement("div"),o={2:"uxs-slide-back",1:"uxs-back"},s=o[i]?o[i]:o.popup;return n&&r.classList.add("uxs-mobile-slide-back"),r.id="uxs_".concat(this.getSiteId(),"_form"),r.classList.add(s),1===i&&(this.spinner=document.createElement("div"),this.spinner.classList.add("uxs-loader"),r.appendChild(this.spinner),r.onclick=function(){t.campaignForm&&t.closeCampaignForm(),t.widgetForm&&t.closeWidgetForm()}),this.iframe=this.createIframe(e),r.appendChild(this.iframe),r}},{key:"hideWidgetForm",value:function(){this.widgetForm.style.display="none"}},{key:"hideCampaignForm",value:function(){this.campaignForm.style.display="none"}},{key:"closeWidgetForm",value:function(){this.overlay&&(this.overlay=null),this.outer.removeChild(this.widgetForm),this.widgetForm=null}},{key:"closeCampaignForm",value:function(){this.outer.removeChild(this.campaignForm),this.clearCampaign(),this.campaignForm=null}},{key:"receiveMessage",value:function(e){var t=e.data,n=t.type,i=t.payload;"hideForm"===n&&("widget"===i?this.hideWidgetForm:this.hideCampaignForm)();"close"===n&&("widget"===i?this.closeWidgetForm:this.closeCampaignForm)();"closePreview"===n&&("widget"===i?this.closeWidgetForm:this.closeCampaignForm)();if("requestInfo"===n){var r=window.screen,o=r.width,s=r.height,a=document.location.href,c=this.dateTime,l=this.device.mobile||this.device.tablet,u=this.device.iphone,d=document.documentElement.clientHeight,h=window.devicePixelRatio||1;this.sendMessage("sendInfo",{width:+(o*h).toFixed(),height:+(s*h).toFixed(),url:a,dateTime:c,isMobile:l,isIphone:u,innerHeight:d})}if("requestPreviewConfig"===n&&this.sendMessage("sendConfig",this.previewConfig),"loadSuccess"===n&&this.spinner){var p="".concat(i,"Form"),f=this[p]&&this[p].removeChild;f&&this[p].removeChild(this.spinner),this.spinner=null,this.overlay&&(f&&this[p].removeChild(this.overlay),this.overlay=null)}if("resizeForm"===n){var g=i.width,v=i.height,y=this.getFormType(),w=window.innerHeight||document.documentElement.clientHeight,b=this.device.mobile||this.device.tablet;if(this.formHeight=w,m("resizeForm",g,"x",v),1===y)return void(v>=w&&(this.iframe.style.height="".concat(v,"px")));if(b||(this.iframe.style.width="".concat(g,"px")),this.iframe.style.height="".concat(v,"px"),this.campaign){var k=this.campaign,x=k.type,S=k.position,C=0===S.indexOf("upper"),F=this.campaignForm.classList.contains(S);if(v>=w&&(this.iframe.style.height="".concat(v,"px")),2===x&&S&&!F&&this.campaignForm.classList.add(S),2===x&&C){var I=parseInt((w-v)/2);this.campaignForm.style.top=v>=w?"0px":"".concat(I,"px")}}}"showPreview"===n&&this.checkPreviewMode()&&(this.previewConfig=i,this.showPreview()),"remove"===n&&this.checkPreviewMode()&&(window._uxsSettings=null,this.outer&&(this.outer.parentNode.removeChild(this.outer),this.outer=null,this.iframe=null,this.campaignForm=null,this.styles.clear(),window.removeEventListener("message",this.messageListenerFn,!0))),"focusInput"===n&&(this.formFocused=!0),"blurInput"===n&&(this.formFocused=!1),"callYaMetrica"===n&&this.reachYaMetricaGoal(i)}},{key:"reachYaMetricaGoal",value:function(e){var t=e.id,n=e.params;if(m("callYaMetrica",t,n),t){var i=window.ym,r=window["yaCounter"+t];i?i(t,"reachGoal","UX_FEEDBACK",n):r&&r.reachGoal("UX_FEEDBACK",n)}}},{key:"sendMessage",value:function(e,t){this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage&&this.iframe.contentWindow.postMessage({type:e,payload:t},"*")}},{key:"messageListenerFn",value:function(e){return this.receiveMessage(e)}},{key:"initListener",value:function(){this.initedListener||(this.initedListener=!0,window.addEventListener("message",this.messageListenerFn,!0))}},{key:"loadForm",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.initListener(),this.clearCampaign(),"widget"===e?(this.widgetForm=this.createForm("widget"),this.overlay=this.createOverlay(),this.overlay.onclick=function(e){e.stopPropagation(),t.closeWidgetForm()},this.widgetForm.appendChild(this.overlay),this.outer.appendChild(this.widgetForm)):(this.campaign=r()({},n),this.campaignForm=this.createForm("campaign"),this.outer.appendChild(this.campaignForm)),window.addEventListener("resize",p(this.onResize,300),!1),this.iframe.focus()}},{key:"onResize",value:function(){var e="popup"===this.getFormType();if(!this.formFocused&&!e){var t=window.innerHeight||document.documentElement.clientHeight;this.formHeight!==t&&this.sendMessage("sendInfo",{innerHeight:t})}}},{key:"clearCampaign",value:function(){this.campaign=null}},{key:"createImage",value:function(e){var t=this,n=document.createElement("img");return n.onclick=function(){return t.loadForm("widget")},n.onload=function(){var e=Math.floor(n.naturalWidth/2);n.style.setProperty("width","".concat(e,"px"),"important"),n.setAttribute("width",e)},n.style.width="50%",n.style.height="auto",n.src=e,n}},{key:"shouldRenderDesktop",value:function(){return this.state.hasOwnProperty("position")&&this.state.position>0}},{key:"shouldRenderMobile",value:function(){var e=this.state.mobile;return e&&e.position>0}},{key:"shouldRender",value:function(){return this.shouldRenderDesktop()||this.shouldRenderMobile()}},{key:"renderWidget",value:function(e){var t=this,n=this.state.targeting,i=n&&n.seconds&&n.seconds.value||1;n&&n.session?this.startSessionInterval(n.session.value,(function(){t.mergeIntervalTargeting(n,(function(){return e()}),i)})):n&&n.scrollPage&&!this.targetingScrollPercent?this.setScrollPage(n.scrollPage.value,(function(){setTimeout((function(){e()}),1e3*i)})):n&&n.seconds?setTimeout((function(){e()}),1e3*i):e()}},{key:"render",value:function(){var e=this,t=this.state,n=t.image,i=t.mobile;if(this.shouldRenderDesktop()){var r=this.createImage(n);this.renderWidget((function(){e.wrapper=e.createWrapper(),e.wrapper.appendChild(r)}))}if(this.shouldRenderMobile()){var o=this.createImage(i.image);this.renderWidget((function(){e.mobileWrapper=e.createMobileWrapper(),e.mobileWrapper.appendChild(o)}))}}},{key:"processSecondsCampaign",value:function(e,t){var n=this,i=e._id,o=e.type,s=e.position,a=e.targeting,c=r()({},this.campaign,{id:i,type:o,position:s}),l=a&&a.trigger;l&&"session"===l.mode&&this.removeEventFromStorage(l.value),this.campaignForm||setTimeout((function(){m("start campaign after",t,"seconds",c),n.widgetForm||n.loadForm("campaign",c)}),1e3*t)}},{key:"onUnloadListener",value:function(e){var t=this.state.campaigns,n=void 0===t?[]:t;e.clientY<10&&(this.processSecondsCampaign(n[0],1),window.removeEventListener("mousemove",this.onUnloadListener))}},{key:"scrollPageListener",value:function(){var e=document.documentElement.scrollHeight;(e-(e-document.documentElement.clientHeight-document.documentElement.scrollTop))/e*100>=this.targetingScrollPercent&&(this.scrollFn(),this.removeScrollPage())}},{key:"removeScrollPage",value:function(){window.removeEventListener("scroll",this.scrollPageListener),this.targetingScrollPercent=null,this.scrollFn=null}},{key:"setScrollPage",value:function(e,t){this.targetingScrollPercent=e,this.scrollFn=t,window.addEventListener("scroll",this.scrollPageListener)}},{key:"startSessionInterval",value:function(e,t){var n=this;this.sessionInterval=+window.sessionStorage.getItem("UXS_interval"),this.sessionInterval||(this.sessionInterval=0);var i=setInterval((function(){n.sessionInterval+=3,window.sessionStorage.setItem("UXS_interval",n.sessionInterval),n.sessionInterval>+e&&(t(),clearInterval(i),window.sessionStorage.removeItem("UXS_interval"))}),3e3)}},{key:"mergeIntervalTargeting",value:function(e,t,n){var i=this,r=e.onunload,o=e.scrollPage;r?setTimeout((function(){window.addEventListener("mousemove",i.onUnloadListener)}),1e3*n):o&&!this.targetingScrollPercent?this.setScrollPage(o.value,(function(){return t()})):t()}},{key:"startTriggetCampaign",value:function(e,t,n,i){var r=this,o="session"===n.targeting.trigger.mode;t.includes(e)?(this.startSessionInterval(i,(function(){return r.processSecondsCampaign(n,1)})),o||(this.removeEventFromStorage(e),window.sessionStorage.removeItem("UXS_interval"))):console.log("Undefined event - ".concat(t))}},{key:"removeEventFromStorage",value:function(e){var t=window.sessionStorage.getItem("UXS_event");t&&window.sessionStorage.setItem("UXS_event",t.split(",").filter((function(t){return t!==e})).join(","))}},{key:"subscriber",value:function(e,t,n){var i=this;return function(r){i.campaignForm?(i.removeEventFromStorage(e),window.UXS.subscribe("event",e,i.subscriber(e,t,n))):i.startTriggetCampaign(e,r,t,n)}}},{key:"processCampaigns",value:function(){var e=this,t=this.state.campaigns,n=void 0===t?[]:t,i=n.length;if(!i)return!1;for(var o=function(t){var i=n[t],o=i.targeting,s=o.seconds,a=o.trigger,c=o.onunload,l=o.session,u=o.scrollPage,d=a&&a.seconds,h=s&&s.enabled?s.value:1;if(m("proccess campaign",t,i),e.campaign=r()({},x),l)return e.startSessionInterval(l.value,(function(){e.mergeIntervalTargeting({onunload:c,scrollPage:u},(function(){return e.processSecondsCampaign(i,h)}),h)})),"break";if(c)return setTimeout((function(){window.addEventListener("mousemove",e.onUnloadListener)}),1e3*h),"break";if(u&&!e.targetingScrollPercent)return e.setScrollPage(u.value,(function(){return e.processSecondsCampaign(i,h)})),"break";if(!a)return e.processSecondsCampaign(i,h),"break";var p=a.value,f="session"===a.mode,g=window.sessionStorage.getItem("UXS_event");g&&(g=g.split(",")),g&&g.includes(p)&&f?e.startSessionInterval(d,(function(){return e.processSecondsCampaign(i,1)})):window.UXS.subscribe("event",p,e.subscriber(p,i,d))},s=0;s<i;s++){if("break"===o(s))break}}},{key:"prerender",value:function(){this.styles=new f,this.styles.addCommon(),this.outer=this.createOuter()}},{key:"checkPreviewMode",value:function(){return window._uxsSettings&&window._uxsSettings.isPreview}},{key:"showPreview",value:function(){this.campaign=r()({},x,this.previewConfig),this.loadForm("campaign",this.campaign)}},{key:"postText",value:function(e,t,n,i){var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),this.post(r,t,n,i)}},{key:"postJSON",value:function(e,t,n,i){var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json; charset=UTF-8"),r.setRequestHeader("Accept","application/json"),this.post(r,t,n,i)}},{key:"post",value:function(e,t,n,i){e.send(JSON.stringify(t)),e.onerror=function(){i&&i(null,0)},e.onload=function(){var t=e.status;try{var r=JSON.parse(e.response);t>=200&&t<400?n&&n(r,t):t>=400&&i&&i(r,t)}catch(t){console.error("JSON Error",t,e)}}}},{key:"saveVisit",value:function(e){var t=this.getSiteId(),n={uid:this.uid,userId:t,campaignId:e};this.postJSON("".concat(k.API_URL,"/visits"),n)}},{key:"loadData",value:function(e,t){var n=this.uid,i=this.uidType,r=this.getSiteId(),o="".concat(k.API_URL,"/widgets/").concat(r,"?uid=").concat(n,"&uidType=").concat(i),s={url:document.location.href,cookies:document.cookie};this.postJSON(o,s,e,t)}},{key:"getDomainName",value:function(){var e=document.location.hostname,t=e.match(/([^.]{1,}\.[^.]{1,})$/i);return null===t?e:t[0]}},{key:"getUid",value:function(){return u.a.get("uxs_uid")}},{key:"createUid",value:function(){var e=h()();return this.setUid(e),e}},{key:"setUid",value:function(e){var t=this.getDomainName();u.a.set("uxs_uid",e,{expires:730,domain:t})}},{key:"createMigrationCookie",value:function(){var e=this.getDomainName();u.a.set("uxs_mig",1,{expires:31,domain:e})}},{key:"checkUid",value:function(){var e=this.getUid();e?(this.uid=e,this.uidType="old",u.a.get("uxs_mig")||(u.a.remove("uxs_uid"),this.setUid(e),this.createMigrationCookie())):(this.uid=this.createUid(),this.uidType="new",this.createMigrationCookie())}},{key:"loadFonts",value:function(){var e=this.state.font;if(e){var t=e.external,n=e.src,i=t?"link":"style",r=document.createElement(i),o=document.getElementsByTagName("head")[0];if(r.id="uxs-fonts",t)return r.setAttribute("rel","stylesheet"),r.setAttribute("href",n),void o.appendChild(r);r.appendChild(document.createTextNode(n)),o.appendChild(r)}}},{key:"start",value:function(){var e=this;this.device=b(),this.checkPreviewMode()?(this.prerender(),this.initListener()):(this.checkUid(),this.loadData((function(t){e.state=t;var n=void 0!==t.error,i=!!t.campaigns,r=!n&&null!==e.state&&e.shouldRender()&&!e.checkPreviewMode();(i||r)&&(e.prerender(),e.processCampaigns()),r&&(e.render(),e.loadFonts())}),(function(e,t){m("loadData error",t,e)})))}}]),e}(),C=n("RIqP"),F=n.n(C),I=function(){function e(){s()(this,e),this.events={}}return c()(e,[{key:"sendEvent",value:function(e){var t=this.events.event,n=sessionStorage.getItem("UXS_event");if(n?sessionStorage.setItem("UXS_event",[e].concat(F()(n.split(",").filter((function(t){return t!==e})))).join(",")):sessionStorage.setItem("UXS_event",e),t&&t[0]){var i=t.findIndex((function(t){return t[0]===e}));t[-1===i?0:i][1](e),this.events.event=this.events.event.filter((function(e,t){return t!==i}))}}},{key:"subscribe",value:function(e,t,n){m("subscribe type:",e,t,n),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n])}}]),e}();!function(){window._uxsSettings||(window._uxsSettings={});var e=/Trident|MSIE/.test(navigator.userAgent),t="5b97522f8a70c35a8534b4b0"===window._uxsSettings.id;e&&t||(window.UXS=new I,(new S).start())}()},xDdU:function(e,t,n){var i,r,o=n("4fRq"),s=n("I2ZF"),a=0,c=0;e.exports=function(e,t,n){var l=t&&n||0,u=t||[],d=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==h){var m=o();null==d&&(d=i=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==h&&(h=r=16383&(m[6]<<8|m[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(f-c)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=f,r=h;var v=(1e4*(268435455&(p+=122192928e5))+f)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var y=p/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=h>>>8|128,u[l++]=255&h;for(var w=0;w<6;++w)u[l+w]=d[w];return t||s(u)}}});